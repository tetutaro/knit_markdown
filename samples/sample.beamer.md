---
title: knit_markdownにおけるMarkdownの書き方
subtitle: プレゼンテーションの場合
author:
- tetutaro
- tetsutaro.maruyama
institute: hogehoge company
date: \jtoday
pandoctheme: bluewave
themetype: a
bib: sample.bib
---

# 表紙の書き方

## 表紙の設定

Markdown の先頭に YAML を書くことによって、
タイトルなどの表紙を生成できる。
YAML は `---` という行で囲む必要がある。

```{caption="表紙の設定の例"}
---
title: タイトル
subtitle: サブタイトル
author: 著者名
institute: 所属会社名
date: \jtoday
pandoctheme: bluewave
themetype: a
bib: sample.bib
---
```

## 表紙の各設定項目の説明

title
: タイトル（省略可）
: 省略すると表紙が出力されない

subtitle
: サブタイトル（省略可）

author
: 著者名（省略可）
: 複数の場合はYAMLの箇条書きにする

institute
: 所属会社名（省略可）

data
: 日付（省略可）
: `\jtoday`とすることで `YYYY/MM/DD` 形式のコンパイル当日の日付になる

## 表紙の各設定項目の説明(cont.)

pandoctheme
: beamerのテーマ名（省略可）
: `bluewave`, `greenleaf`, `redflower`, `whitesnow` のいずれか
: 省略した場合は `bluewave` になる

themetype
: beamerのテーマ内のタイプ（省略可）
: `a`, `b`, `c` のいずれか
: 省略した場合は `a` になる

bib
: 参考文献が書かれたファイル名（省略可）
: 詳細は[@sec:cite]にて

# 一般的な Markdown の書式

## 記号付き箇条書き

* `* ` を文頭に付けると、記号付き箇条書きになる
* `- ` だと箇条書きにならない
	* 行頭にインデントをつけると箇条書きも１段下がる
		* 最大でレベル３まで

## 順序付き箇条書き

#. `#. ` を行頭につけると、順序付き箇条書きになる
#. 自動的にナンバリングされる
	#. レベル２
	    #. レベル３（最大）
2. `1. ` のように数字とピリオドでも良い
    8. 数字は何でも良く、自動的にナンバリングされる
    1. なので全部 `1. `で良い
    5. ただし、各レベルの最初だけは、その数が反映される
9) `1) ` のように数字と半括弧でも良い
    #) ナンバリングをシャープにしても同様
(5) `(1) ` のように数字と両括弧でも良い

## 順序付き箇条書き(cont.)

ix. アラビア数字を指定することも出来る
e. アルファベットを指定することも出来る
#. そこからシャープに戻すと、直前のナンバリングが継承される
d. アラビア数字・アルファベットの場合
	k) 大文字は認識されない
    (q) 括弧も両括弧もOK
* トップレベルの記号付き/順序付き、ナンバリング形式/マーカー形式の変更
    #. 前の箇条書きとは異なる箇条書きだと見做される
    #. よって、箇条書きの間に行間が入ってしまう

## 定義リスト

word
: definition

単語と
: それに続くコロンから始まる行

単語間は
: １行開けなくてはならない

定義は
: ひとつ書いて
: もうひとつを書くこともできる

単語は
: 色付きになっている

## テーブル

テーブルの書式には４種類が存在するが、
実際には２種類使えれば十分であろう。

## シンプルテーブル

一番簡単なテーブル

ヘッダ１ ヘッダ２     ヘッダ３
-------- ------------ ----------
ヘッダの 下にハイフン を書くだけ
各行が   テーブルの   １行になる
列の開始 位置を揃える 必要がある

キャプションはわざと付けていない

## パイプテーブル

| ヘッダ１ | ヘッダ２ | ヘッダ３ | ヘッダ４ |
|:---:|:---|---:|---|
| 中央寄せ | 左寄せ | 右寄せ | デフォルト |
| セルを | パイプで | 囲む | やり方 |
| 一行の | セルの数は | 少なくても |
| | | | 構わない |

: キャプションは１行空けてコロンから始める {#tbl:sample1}

テーブルにラベルをつけたい場合は、
キャプションにしかラベルが付かないので、
キャプションを書く必要がある

## インラインでの文章強調

テキストを強調するには *アスタリスク* で囲む。
アスタリスクと強調したい文字の間に *空白が入ると 強調されない* ので注意。

ただし、フォントの設定がうまく言ってないので、太文字にならない（要するに使えない）。

- `H~2~O` → H~2~0 : チルダで囲むと下付き文字
- `x^2^` → x^2^ : ハットで囲むと上付き文字

文字に色をつけたい場合は \LaTeX のコマンドを直接書く。
`\textcolor{red}{赤い文字}`が\textcolor{red}{赤い文字}の様になる。

## verbatim, コードブロック

`> command` のようにひとつのグレイヴ・アクセント（\`）で囲むと、
インラインのverbatimになる。
フォントと背景色を変えている。

```{#code:sample1 caption="コードブロックのサンプル"}
３つのグレイヴ・アクセントで囲まれたブロック（コードブロック）は
特にコードを書き記すことを想定して設定している。
{caption="hogehoge"}でキャプションを付けることができる。
```

## 数式 {#sec:sample1}

インライン形式の数式は $f(x)=3x+2$ の様に`$数式$`とダラーで囲む。
この場合、ダラーと数式の間に空白を入れないこと。

ディスプレイ形式の数式は、`$$数式$$`と２重のダラーで囲む。

$$
f(x) = 3x + 2 {#eq:sample1}
$$

自動的にequation環境に変換しているため、数式に必ず番号が振られてしまう。
番号を振りたくない場合は`\nonumber`を付けなければならない。

## 数式（続き）

equation環境は複数行の数式も書けないが、
数式中に改行（２重バックスラッシュ）もしくはアンパッサンドがあれば
align環境と自動的に判断する。

$$
f(x) & = (x - 2)(x + 1) \nonumber \\
& = x^2 - x - 2
$$

## 外部リンクと画像

ただ単にHTMLへのリンクを張りたい場合は、<http://google.com>のようにURLを不等号記号で囲む（`<http://google.com>`）。
リンクにタイトルを付けたい場合は、[google](http://google.com)のように角括弧で囲まれたタイトルと、それに続く括弧のURLの組で表せる。（`[google](http://google.com)`）

また、最初にエクスクラメーションマークが付いたリンクは画像として扱われる（`![虎の画像](tiger.png)`）。大きすぎる画像は適当にリサイズされる。

## 画像の例

![虎の画像](tiger.png){#fig:sample1}

# セクションとブロック

## セクションとブロック

* レベル１のセクションは、栞とタイトルの一言スライドを生成する
* レベル２のセクションは、スライド（frame）を生成する
* レベル３のセクションは、ブロックを生成する
* ブロックを生成するクラスは以下
	* ブロック : block
        * クラスを付けない場合はデフォルトでこれになる
	* アラートブロック : alertblock
	* 例ブロック : exampleblock
	* 定理 : theorem
    * 定義 : definition
	* 例 : example
	* 証明 : proof

## デフォルトのブロック

### ブロックのサンプル {#block:sample1 .block}

タイトルを付けると自動的にヘッダが付く。

* 箇条書きなどがあっても
* 明示的に終了させないと
* ブロックの中に入る

クラス名は付けなくても良いが、通常のPDFとの互換性のためには
付けたほうが良い。

### {.block}

タイトルを付けないとヘッダ無しになる。

```{caption="ブロックの書き方"}
### タイトル {.block}

ブロックの内容
```

## ブロックの終了

### 次のセクションまで

クラスを付けたレベル３のセクションが始まってから、
次の何らかのセクションやブロックが指定されるまでがブロックになる。

### 明示的に終わらせる場合

`<!-- -->`というHTMLのコメントの１行を入れる。

<!-- -->

この行の前に`<!-- -->`が入っているので、この行はブロックの外になる。

## アラートブロック

### アラートブロックのサンプル {#block:sample2 .alertblock}

タイトルを付けると自動的にヘッダが付く。

### {.alertblock}

タイトルを付けないとヘッダ無しになる。

```{caption="アラートブロックの書き方"}
### タイトル {.alertblock}

アラートブロックの内容
```

## 例ブロック

### 例ブロックのサンプル {#block:sample3 .exampleblock}

タイトルを付けると自動的にヘッダが付く。

### {.exampleblock}

タイトルを付けないとヘッダ無しになる。

```{caption="例ブロックの書き方"}
### タイトル {.exampleblock}

例ブロックの内容
```

## 定理

### 定理のサンプル {#theo:sample1 .theorem}

タイトル有りの場合。タイトルには自動的に「定理」と通番が付けられる。

### {.theorem}

タイトルを書かないと、「定理」と通番だけのヘッダが付けられる。

```{caption="定理の書き方"}
### タイトル {.theorem}

定理の内容
```

## 定義

### 定義のサンプル {#def:sample1 .definition}

タイトル有りの場合。タイトルには自動的に「定義」と通番が付けられる。

### {.definition}

タイトルを書かないと、「定義」と通番だけのヘッダが付けられる。

```{caption="定義の書き方"}
### タイトル {.definition}

定義の内容
```

## 例

### 例のサンプル {#exam:sample1 .example}

タイトル有りの場合。タイトルには自動的に「例」と通番が付けられる。

### {.example}

タイトルを書かないと、「例」と通番だけのヘッダが付けられる。

```{caption="例の書き方"}
### タイトル {.example}

例の内容
```

## 例ブロックと例の違い

- 例はタイトルの前に「例」と通番が付くが、例ブロックには何も付かない
- タイトルが無い場合、例ブロックはヘッダが消えるが、例は「例」と通番だけのヘッダが付けられる

## 証明

### 証明のサンプル {#block:sample4 .proof}

タイトル有りの場合。

### {.proof}

タイトルを付けないとヘッダ無しになる。

```{caption="証明の書き方"}
### タイトル {.proof}

証明の内容
```

# ラベル・参照と引用

## ラベルと参照

* ラベルの書き方は`{#タイプ:名前}`
    * 必ずコロンを入れる
* 参照の書き方は`[@タイプ:名前]`
    * ラベルと同じタイプ・名前そして必ずコロンを入れる

ラベルを付けたいもの タイプ
-------------------- ------------
スライド             sec/section
図                   fig/figure
表                   tbl/table
数式                 eq/equation
定理                 theo/theorem
定義                 def/definition
例                   exam/example

## スライドのラベル・参照

* ラベルはタイトルに続けて書く
* タイプに`sec`もしくは`section`を指定する
    * 名前がおかしいが、通常のPDFとの互換性のため
* 参照の例：[@sec:sample1]
    * 「スライド」を書かなくても自動的に付く

```{caption="スライドのラベル・参照の書き方"}
## スライドのタイトル {#sec:sample}

[@sec:sample]を参照のこと
```

## 図のラベル・参照

* ラベルはファイルの指定の後に続けて書く
* タイプに`fig`もしくは`figure`を指定する
* 参照の例：[@fig:sample1]
    * 「図」を書かなくても自動的に付く

```{caption="図のラベル・参照の書き方"}
![サンプル画像](sample.png) {#fig:sample}

[@fig:sample]を参照のこと
```

## 表のラベル・参照

* ラベルは表のキャプションの後に続けて書く
* タイプに`tbl`もしくは`table`を指定する
* 参照の例：[@tbl:sample1]
    * 「表」を書かなくても自動的に付く

```{caption="表のラベル・参照の書き方"}
| Header One  | Header Two |
| :---------- | :--------- |
| Cell One    | Cell Two   |

: キャプション {#tbl:sample}

[@tbl:sample]を参照のこと
```

## 数式のラベル・参照

* ディスプレイ形式の、nonumberを付けてない行に対してラベルを書く
* タイプに`eq`もしくは`equation`を指定する
* 参照の例：[@eq:sample1]
    * 「式」と括弧が自動的に付く。

```{caption="数式のラベル・参照の書き方"}
$$
f(x) = 3x + 2 {#eq:sample}
$$

[@eq:sample]を参照のこと
```

## 定理系のラベル・参照

* 定理・定義・例のブロックには同時にラベルを指定することができる
* タイプ
    * 定理 : `theo`もしくは`theorem`
    * 定義 : `def`もしくは`definition`
    * 例 : `exam`もしくは`example`
* 参照の例：[@theo:sample1]、[@def:sample1]、[@exam:sample1]
    * それぞれのラベルが自動的に付く

```{caption="定理・定義・例のラベル・参照の書き方"}
### 定理のサンプル {#theo:sample .theorem}

### 定義のサンプル {#def:sample .definition}

### 例のサンプル {#exam:sample .example}

[@theo:sample]、[@def:sample]、[@exam:sample]を参照のこと
```

## コードブロックのラベル・参照

* コードブロックにも同様にラベルを指定することが出来る
* タイプは特に指定はないが、例えば`code`などが良いと思われる
* 参照の例：[@code:sample1]
    * キャプションに自動的に変換される

```{caption="コードブロックのラベル・参照の書き方"}
　```{#code:sample caption="sample code"}
　sample code
　```

　[@code:sample]を参照のこと
```

## その他ブロック系のラベル・参照

* block, alterblock, exampleblock, proof にも特定のタイプは無い
* しかし同様の方法でラベルが付けられる
* 例えば`block`などが良いのではないか
* 参照の例：[@block:sample1]、[@block:sample2]、[@block:sample3]、[@block:sample4]
    * タイトルに自動的に変換される

```{caption="その他のブロック系のラベル・参照の書き方"}
### ブロックのサンプル {#block:sample1 .block}

### アラートブロックのサンプル {#block:sample2 .alertblock}

### 例ブロックのサンプル {#block:sample3 .exampleblock}

### 証明のサンプル {#block:sample4 .proof}

[@block:sample1]、[@block:sample2]、
[@block:sample3]、[@block:sample4]を参照のこと
```

## 引用 {#sec:cite}

* まずはBibTeX形式で書かれた参考文献ファイルを用意する
* BibTeX形式は、[Google Scholar](https://scholar.google.com/)や[Mendeley](https://www.mendeley.com/)で表示できるので、わざわざ自分で書く必要は無い
    * 逆にコピペ推奨
* それでも自分で書きたい場合
    * [Wikipedia - BibTex](https://ja.wikipedia.org/wiki/BibTeX) に詳しい

## BibTex形式ファイルの例

例えば以下のようなファイルを`sample.bib`というファイル名で用意する

```{#code:bibsample caption="sample.bib"}
@article{samplearticle,
  title={Title of Sample Article},
  author={Someone Hogehoge},
  journal={Journal of something},
  year={2017}
}
@book{samplebook,
  title={Title of Sample Book},
  author={Someone Mogemoge},
  year={2017},
  publisher={Dummy Publisher}
}
```

## 引用の書き方

* Markdownの先頭に書いたYAML形式のヘッダで、ファイル名を指定する
    * 前スライドの例だと `bib: sample.bib`
* 自動的にこの参照文献ファイルが読み込まれる
* 引用の例：`[@samplearticle]` → [@samplearticle]
* 引用することによって、参考文献リスト（[@code:bibsample]）とそこへのリンクが生成される

## 引用の注意点

* 参考文献リストにあっても引用されていないものは、参考文献リストには表示されない
* 参考文献リストが本文中で全く引用されていない場合は、参考文献という章自体が全く表示されない
* 引用の場合は、`[@引用元]`のようにコロンは入れてはならない
    * コロンの有る無しで参照か引用か判断しているから
